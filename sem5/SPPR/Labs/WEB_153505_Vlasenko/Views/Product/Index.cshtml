@model (List<Clothes> ClothesList, List<ClothesCategory> ClothesCategoryList)
@{
	ViewData["Title"] = "Список позиций";
	var request = ViewContext.HttpContext.Request;
	var returnUrl = request.Path + request.QueryString.ToUriComponent();
}

<div class="container">
	<div class="dropdown col-sm-1 mt-4">
		<!-- categories dropdown -->
		<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
			@(ViewData["currentCategory"] ?? "Все")
		</button>
		<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" aria-haspopup="true" aria-expanded="false">
			<li>
				<a class="dropdown-item"
				   asp-controller="Product"
				   asp-action="Index"
				   asp-route-category=@null>Все</a>
			</li>
			@foreach (var item in Model.ClothesCategoryList)
			{
				<li><a class="dropdown-item" asp-controller="Product" asp-action="Index" asp-route-categoryNormalizedName=@item.NormalizedName asp-route-currentCategory=@item.Name>@item.Name</a></li>
			}
		</ul>
	</div> <!-- /categories dropdown -->

	<div class="row offset-sm-2">
		@foreach (var item in Model.ClothesList)
		{
			<div class="col-md-4 mb-4">
				<div class="card">
					<img src="@item.ImagePath" class="card-img-top" style="width: 100%; max-height: 200px; min-height: 200px; object-fit: contain;">
					<div class="card-body">
						<h5 class="card-title">@item.Name</h5>
						<p class="card-text">@item.Description</p>
						<p class="card-text">$@item.Price</p>
						<a asp-controller="Cart" asp-action="Add" asp-route-id="@item.Id" asp-route-returnUrl=@returnUrl class="btn btn-primary">Добавить в корзину</a>
					</div>
				</div>
			</div>
		}
	</div>
</div>
